# JDBC — Statement

---

## 1) What is Statement?

The **`Statement`** is an interface in `java.sql` package that is used to **execute static SQL queries** against a relational database.

It is created from a `Connection` object and can execute **DDL, DML, and SELECT** queries.

---

## 2) Declaration

```java
Statement stmt = conn.createStatement();
```

Here:

* `conn` → A valid `Connection` object.
* `stmt` → A `Statement` object used to send SQL queries.

---

## 3) Important Methods of Statement

| Method                      | Description                                                         | Return Type           |
| --------------------------- | ------------------------------------------------------------------- | --------------------- |
| `executeQuery(String sql)`  | Executes **SELECT** query                                           | `ResultSet`           |
| `executeUpdate(String sql)` | Executes **INSERT, UPDATE, DELETE, DDL** (CREATE, DROP)             | `int` (rows affected) |
| `execute(String sql)`       | Executes any SQL (returns `true` if a ResultSet, `false` otherwise) | `boolean`             |
| `close()`                   | Closes the statement and releases DB resources                      | `void`                |

---

## 4) Example: Using Statement

```java
import java.sql.*;

class StatementExample {
    public static void main(String[] args) {
        try {
            // 1. Load Driver (for MySQL)
            Class.forName("com.mysql.cj.jdbc.Driver");

            // 2. Establish Connection
            Connection conn = DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/testdb", "root", "password");

            // 3. Create Statement
            Statement stmt = conn.createStatement();

            // 4. Execute Query (DDL)
            stmt.executeUpdate("CREATE TABLE IF NOT EXISTS students (id INT PRIMARY KEY, name VARCHAR(50))");

            // 5. Insert Data
            int rows = stmt.executeUpdate("INSERT INTO students VALUES (1, 'Alice')");
            System.out.println(rows + " row(s) inserted.");

            // 6. Select Data
            ResultSet rs = stmt.executeQuery("SELECT * FROM students");
            while (rs.next()) {
                System.out.println(rs.getInt("id") + " - " + rs.getString("name"));
            }

            // 7. Close
            rs.close();
            stmt.close();
            conn.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
```

---

## 5) Types of Queries with Statement

1. **DDL (Data Definition Language)**

   ```java
   stmt.executeUpdate("CREATE TABLE dept (id INT, name VARCHAR(50))");
   ```

2. **DML (Data Manipulation Language)**

   ```java
   stmt.executeUpdate("INSERT INTO dept VALUES (1, 'HR')");
   stmt.executeUpdate("UPDATE dept SET name='Finance' WHERE id=1");
   stmt.executeUpdate("DELETE FROM dept WHERE id=1");
   ```

3. **SELECT (Query Data)**

   ```java
   ResultSet rs = stmt.executeQuery("SELECT * FROM dept");
   ```

---

## 6) Diagram (Workflow)

```
   Java Application
          |
   -------------------
   |     JDBC        |
   -------------------
          |
   Connection ---> Statement ---> SQL Query ---> Database
                                  ↑
                                ResultSet
```

---

## 7) Limitations of Statement

* SQL queries are written as **strings** → prone to **syntax errors**.
* Not suitable for **dynamic queries** (with parameters).
* Vulnerable to **SQL Injection** (if user input is directly concatenated).
* Repeated execution is slower because query is **recompiled each time**.

---

## 8) When to Use Statement?

✅ Use `Statement` when:

* SQL queries are **static** (fixed, not taking user input).
* Simple execution of **DDL/DML** is needed.

❌ Avoid `Statement` when:

* Queries involve **user input** → use `PreparedStatement`.
* Performance is critical → `PreparedStatement` or `CallableStatement` is better.

---

## 9) Comparison: Statement vs PreparedStatement

| Feature     | Statement                    | PreparedStatement                         |
| ----------- | ---------------------------- | ----------------------------------------- |
| SQL         | Static                       | Dynamic with placeholders (?)             |
| Performance | Slower (compiled every time) | Faster (precompiled & cached)             |
| Security    | Vulnerable to SQL Injection  | Safe (parameters bound)                   |
| Use case    | Simple, fixed queries        | Queries with inputs / multiple executions |

---

## 10) Summary Table

| Aspect     | Statement                                        |
| ---------- | ------------------------------------------------ |
| Package    | `java.sql`                                       |
| Created by | `Connection.createStatement()`                   |
| Executes   | Static SQL queries                               |
| Methods    | `executeQuery()`, `executeUpdate()`, `execute()` |
| Returns    | `ResultSet` (for SELECT), `int` (for DML)        |
| Best for   | Simple & fixed SQL queries                       |
| Limitation | Not safe, slower, prone to SQL injection         |

---

